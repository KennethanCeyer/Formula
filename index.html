<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<title>JQuery Formula</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
	<link rel="stylesheet" href="demo/css/bootstrap.min.css">
	<link rel="stylesheet" href="demo/css/prism.css" />
	<link rel="stylesheet" href="demo/css/formula-style.css" />
	<link rel="stylesheet" type="text/css" href="src/jquery.formula.css" />
	<style type="text/css">
		@import url(https://fonts.googleapis.com/css?family=Raleway);
		html, body {
			position: relative;
			height: 100%;
		}

		#wrapper {
			padding-bottom: 40px;
		}

		.header {
			max-width: 1200px;
			width: 80%;
			margin: 0 auto;
			padding-top: 40px;
			padding-bottom: 40px;
			margin-bottom: 40px;
			text-align: center;
		}

		.header h1 {
			margin-bottom: 20px;
			font-size: 24px;
			font-weight: 400;
			font-family: 'Raleway', 'helvetica', 'sans-serif';
			color: #333333;
		}

		.article {
			max-width: 1200px;
			width: 80%;
			margin: 0 auto;
			margin-top: 40px;
			padding-top: 40px;
			border-top: 1px solid #efefef;
			font-family: 'Raleway', 'helvetica', 'sans-serif';
			text-align: center;
		}

		.article h3 {
			margin-bottom: 40px;
		}

		.article table {
			font-size: 115%;
			text-align: left;
		}

		.article pre {
			font-size: 115%;
		}

		.tab { width: 100%; max-width: 600px; margin: 20px auto; border: 1px solid #e7e7e7; padding: 5px; }
		.nav.tab { width: auto; max-width: 100%; margin: 0; border: 0; padding: 0; border-bottom: 1px solid #ddd; }
		.pignose-sub-tab { border: 0; margin: 0; padding: 0;
		.table { width: 100%; table-layout: fixed; }
		.table .subject { text-align: left; padding-left: 5%; }
		.table .date { text-align: right; padding-right: 5%; }
	</style>
	<script type="text/javascript" src="demo/js/jquery.latest.min.js"></script>
	<script type="text/javascript" src="demo/js/jquery-ui.latest.js"></script>
	<script type="text/javascript" src="demo/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="demo/js/prism.min.js"></script>
	<script type="text/javascript" src="src/jquery.formula.js"></script>
	<script type="text/javascript">
	//<![CDATA[
	$(function() {
		var $formula = $('.formula').formula();

		// You want to get loadable data like below, check code line 103.
		var data = {"operator":"+","operand1":{"operator":"+","operand1":{"value":"1","type":"unit"},"operand2":{"value":"2","type":"unit"}},"operand2":{"value":"3","type":"unit"}};
		$formula.data('formula').setFormula(data);

		$('.formula-drop .formula-drop-items .formula-drop-item').draggable({
			revert: 'invalid',
			helper: 'clone',
			cancel: ''
		});

		$('.formula-advanced').droppable({
			hoverClass: "formula-active",
			drop: function( event, ui ) {
				var $e = ui.draggable.clone();
				$(this).formula('insert', $e);
			}
		});

		$('.formula-get .btn-primary').bind('click', function(event) {
			event.preventDefault();
			// $('.formula-advanced').data('formula').getFormula() retuns javascript object.
			// $('.formula-advanced').data('formula').getFormula(function(data) {
			// 	console.log(data.data); // It may returns loadable data.
			// });
			$('.formula-advanced').data('formula').getFormula(function(data) {
				console.log(JSON.stringify(data.data)); // It may returns string data.
			});
			$('.formula-get .formula-get-json .formula-get-json-data').text(JSON.stringify($('.formula-advanced').data('formula').getFormula()));
		});
	});
	//]]>
	</script>
</head>
<body>
	<div id="wrapper">
		<div class="header">
			<img src="demo/img/pignose-logo.jpg" alt="" />
			<h1>PIGNOSE Formula</h1>
			<a href="https://github.com/KennethanCeyer/Formula" target="_blank" class="btn btn-primary">View project on Github</a> <a href="https://github.com/KennethanCeyer/Formula/archive/master.zip" target="_blank" class="btn btn-info">Download zip</a>
		</div>
		<div class="article">
			<h3>Basic formula</h3>
			<div class="formula formula-basic"></div>
		</div>
		<div class="article">
			<h3>Advanced formula</h3>
			<div class="formula formula-advanced"></div>

			<div class="formula-drop">
				<i class="fa fa-mouse-pointer" aria-hidden="true"></i>
				<h4>You can drag and drop each of below items to formula area.</h4>
				<p>If you want to set a value on your custom drag and drop item, Set <span class="label label-default">data-value</span> attribute on your element.</p>
				<div class="formula-drop-items">
					<a href="#" class="formula-drop-item" data-value="3.14">PI</a>
					<a href="#" class="formula-drop-item" data-value="3">Variable (INT 3)</a>
					<a href="#" class="formula-drop-item" data-value="+">Custom operator (+)</a>
				</div>
			</div>

			<div class="formula-get">
				<h4>Also you can get the <span class="label label-default">javascript object</span> data by calling <span class="label label-primary">getFormula();</span></h4>
				<a href="#" class="btn btn-primary">getFormula</a>
				<div class="formula-get-json">
					<span class="formula-get-json-label">JSON Data</span>
					<div class="formula-get-json-data">The json data will be appeared when you click <span class="label label-default">getFormula</span> button.</div>
				</div>
				<h4>If you want to change loadable data, And you use <span class="label label-default">setFormula()</span> function in case, Use callback like follows.</h4>
				<pre><code class="language-js">$formula.data('formula').getFormula(function(data) {
	// data.data is formula parsed object data.
	console.log(data.data);
 });</code></pre>
			</div>
		</div>
		<div id="content" class="article">
			<h3>Methods</h3>
			<h4>First of all, You can call the function to use <span class="label label-default">$element.data('formula').Function Name();</span></h4>
			<table class="table table-striped table-hover">
				<thead>
					<tr>
						<th>name</th>
						<th>value</th>
						<th>description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>syntaxCheck(callback)</td>
						<td><div class="label label-primary">function</div></td>
						<td>This feature can check the formula syntax, And inform result (passed or not) to label in the formula box. First argument are callback for checking result.</td>
					</tr>
					<tr>
						<td>destroyDrag</td>
						<td><div class="label label-primary">function</div></td>
						<td>You can destroy drag selection in formula.</td>
					</tr>
					<tr>
						<td>selectAll</td>
						<td><div class="label label-primary">function</div></td>
						<td>You can select all unit in formula.</td>
					</tr>
					<tr>
						<td>click(pos)</td>
						<td><div class="label label-primary">function</div></td>
						<td>If you want click and make a cursor in formula, Use this feature. You need to send the correct coordinate like <span class="label label-default">event.clientX</span></td>
					</tr>
					<tr>
						<td>keydown(key, shift)</td>
						<td><div class="label label-primary">function</div></td>
						<td>This method helps you to insert a character by <span class="label label-default">event.keycode</span>. If you give second argument as boolean, You can insert new character which be combined with Shift key.</td>
					</tr>
					<tr>
						<td>insertChar(key)</td>
						<td><div class="label label-primary">function</div></td>
						<td>It is more simple usage to insert a character.</td>
					</tr>
					<tr>
						<td>empty()</td>
						<td><div class="label label-primary">function</div></td>
						<td>Remove all unit in formula, It seems like <span class="label label-default">jQuery empty()</span>.</td>
					</tr>
					<tr>
						<td>setFormula(data)</td>
						<td><div class="label label-primary">function</div></td>
						<td>You can load formula units by <span class="label label-default">javascript object</span>.</td>
					</tr>
					<tr>
						<td>getFormula(callback)</td>
						<td><div class="label label-primary">function</div></td>
						<td>You can get formula units as <span class="label label-default">javascript object</span>.</td>
					</tr>
					<tr>
						<td>insert(e)</td>
						<td><div class="label label-primary">function</div></td>
						<td>You can insert html tag directly on formula.</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div id="bower" class="article">
			<h3>bower</h3>
			<blockquote><p>If you use bower.</p></blockquote>
			<pre><code class="language-bash">bower install jquery-formula</code></pre>
		</div>
		<div id="npm" class="article">
			<h3>npm</h3>
			<blockquote><p>If you use npm.</p></blockquote>
			<pre><code class="language-bash">npm install jquery-formula</code></pre>
		</div>
		<div id="sample" class="article">
			<h3>sample</h3>
			<ul class="nav nav-tabs tab">
				<li role="presentation" class="active"><a href="#html" data-toggle="tab" aria-controls="html">HTML</a></li>
				<li role="presentation"><a href="#javascript" data-toggle="tab" aria-controls="javascript">Javascript</a></li>
				<li role="presentation"><a href="#css" data-toggle="tab" aria-controls="css">CSS</a></li>
			</ul>
			<div class="tab-content">
				<div role="tabpanel" class="tab-pane active" id="html">
					<pre><code class="language-markup">&lt;div class=&quot;formula&quot;&gt;&lt;/div&gt;</code></pre>
				</div>
				<div role="tabpanel" class="tab-pane" id="javascript">
					<pre><code class="language-js">$(function() {
	$('.formula').formula();
});</code></pre>
				</div>
				<div role="tabpanel" class="tab-pane" id="css">
					<pre><code class="language-css">.formula {
    min-height: 400px;
}

.formula-wrapper .formula {
    background-color: #f8f8f8;
    border: 1px solid #d8d8d8;
    text-align: left;
    box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
}</code></pre>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
